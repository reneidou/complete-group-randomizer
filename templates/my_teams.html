{% extends "base.html" %}

{% block title %}Meine Teams - Gruppen-Zufallsgenerator{% endblock %}

{% block content %}
    <h2>Meine gespeicherten Teamkonfigurationen</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flash-messages">
                {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    {% if user_teams %}
        <div class="team-configs-container">
            {% for config in user_teams %}
                <div class="config-card">
                    <h3>{{ config.name }}</h3>
                    <p>Gespeichert am: {{ config.timestamp.strftime('%d.%m.%Y %H:%M') }}</p>
                    <p>Anzahl Spieler: {{ (config.players_json | fromjson) | length }}</p>
                    <div class="config-actions">
                        {# Neuer "Laden"-Button #}
                        <a href="{{ url_for('load_config', config_id=config.id) }}" class="button button-small load-btn">Laden</a>
                        <a href="#" class="button button-small">Details / Erneut generieren (bald verfügbar)</a>
                        {# Löschen-Button folgt später #}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>Du hast noch keine Teamkonfigurationen gespeichert. Generiere jetzt welche auf der <a href="{{ url_for('home') }}">Startseite</a>!</p>
    {% endif %}

    <div class="actions-container">
        <a href="{{ url_for('home') }}" class="button">Neue Gruppen erstellen</a>
    </div>
{% endblock %}