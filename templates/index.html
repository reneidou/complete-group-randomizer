{% extends "base.html" %}

{% block title %}Startseite - Gruppen-Zufallsgenerator{% endblock %}

{% block content %}
    <h2>Willkommen beim Gruppen-Zufallsgenerator!</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flash-messages">
                {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
    <p>Erstelle schnell und einfach Gruppen für dein Projekt, dein Training oder dein Team. Egal ob Sport oder Projekte, hier bist du richtig.</p>

    <form action="{{ url_for('generate_groups') }}" method="post">
        <div class="form-section">
            <h3>1. Namen der Teilnehmer eingeben</h3>
            <p>Gib die Namen der Personen ein, die du in Gruppen aufteilen möchtest.</p>
            <div id="names-container">
                {# Felder für Namen dynamisch generieren oder mit geladenen Namen füllen #}
                {% if loaded_names %}
                    {% for name in loaded_names %}
                        <input type="text" name="name[]" placeholder="Name der Person" value="{{ name }}" required>
                    {% endfor %}
                {% else %}
                    {# Standardmässig 2 leere Felder, wenn nichts geladen wurde #}
                    <input type="text" name="name[]" placeholder="Name der Person" required>
                    <input type="text" name="name[]" placeholder="Name der Person" required>
                {% endif %}
            </div>
            <button type="button" id="add-name-btn">Weiteren Namen hinzufügen</button>
        </div>

        <hr>

        <div class="form-section">
            <h3>2. Gruppenkonstellation festlegen</h3>
            <p>Wähle, wie du deine Gruppen bilden möchtest.</p>

            <label for="group-type">Gruppenbildung nach:</label>
            <select name="group_type" id="group-type">
                {# `selected` Attribut setzen, falls settings geladen wurden #}
                <option value="num_groups" {% if loaded_settings and loaded_settings.group_type == 'num_groups' %}selected{% endif %}>Anzahl Gruppen</option>
                <option value="group_size" {% if loaded_settings and loaded_settings.group_type == 'group_size' %}selected{% endif %}>Gruppengrösse</option>
            </select>

            <div id="num-groups-input" class="group-setting-input" style="{% if loaded_settings and loaded_settings.group_type == 'num_groups' %}display: block;{% else %}display: none;{% endif %}">
                <label for="num-groups">Anzahl der Gruppen:</label>
                <input type="number" name="num_groups" id="num-groups" min="1" value="{{ loaded_settings.num_groups if loaded_settings and loaded_settings.num_groups else 2 }}" {% if not loaded_settings or loaded_settings.group_type == 'num_groups' %}required{% endif %}>
            </div>

            <div id="group-size-input" class="group-setting-input" style="{% if loaded_settings and loaded_settings.group_type == 'group_size' %}display: block;{% else %}display: none;{% endif %}">
                <label for="group-size">Gewünschte Gruppengrösse:</label>
                <input type="number" name="group_size" id="group-size" min="1" value="{{ loaded_settings.group_size if loaded_settings and loaded_settings.group_size else 3 }}" {% if loaded_settings and loaded_settings.group_type == 'group_size' %}required{% endif %}>
            </div>
        </div>

        <hr>

        <div class="form-section">
            <h3>3. Optionen (optional, später aktivierbar)</h3>
            <p>Diese Funktionen werden später verfügbar sein. Für den Start konzentrieren wir uns auf die Kernfunktion.</p>
            <ul>
                <li>(Optional) Wahl zwischen Modus: Projekt-Teams oder Sport-Teams</li>
                <li>(Optional) Möglichkeit, aus verschiedenen Sportarten zu wählen</li>
                <li>(Optional) Eingabe von Ratings pro Teilnehmer/Name</li>
                <li>(Optional) Eingabe von Rollenbezeichnungen/Tags</li>
                <li>(Optional) Präferenz auswählen, welche Personen ich sicher in einer Gruppe zusammen haben möchte und welche sicher nicht</li>
                <li>(Optional) Punktestände eintragen und Personenrating anpassen</li>
            </ul>
            <p>Jede dieser optionalen Funktionen wird mit einem Klick modular ein- oder ausgeblendet werden können, wenn sie implementiert sind.</p>
        </div>

        <button type="submit" class="submit-btn">Gruppen generieren</button>
    </form>
{% endblock %}