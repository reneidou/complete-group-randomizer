{% extends "base.html" %}

{% block title %}Startseite - Gruppen-Zufallsgenerator{% endblock %}

{% block content %}
    <h2>Willkommen beim Gruppen-Zufallsgenerator!</h2>
    <p>Erstelle schnell und einfach Gruppen fÃ¼r dein Projekt, dein Training oder dein Team.</p>

    <form action="{{ url_for('generate_groups') }}" method="post" id="generate-groups-form">
        <div class="form-section">
            <h3>1. Namen der Teilnehmer eingeben</h3>
            <p>Gib die Namen der Personen ein, die du in Gruppen aufteilen mÃ¶chtest.</p>
            <div id="names-container">
                {% if loaded_names %}
                    {% for name in loaded_names %}
                        <div class="name-input-wrapper">
                            <input type="text" name="name[]" placeholder="Name der Person" value="{{ name }}" required>
                            <button type="button" class="remove-name-btn" aria-label="Namenfeld entfernen">&times;</button>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
            <button type="button" id="add-name-btn" class="button">Weiteren Namen hinzufÃ¼gen</button>
        </div>

        <div class="form-section">
            <h3>2. Gruppeneinteilung festlegen</h3>
            <label for="group-type">Wie mÃ¶chtest du die Gruppen einteilen?</label>
            <select id="group-type" name="group_type">
                <option value="num_groups" {% if loaded_settings and loaded_settings.get('group_type') == 'num_groups' %}selected{% endif %}>Anzahl Gruppen</option>
                <option value="group_size" {% if loaded_settings and loaded_settings.get('group_type') == 'group_size' %}selected{% endif %}>GruppengrÃ¶ÃŸe</option>
            </select>

            <div id="num-groups-input" style="display:none;">
                <label for="num-groups">Anzahl der Gruppen:</label>
                <input type="number" id="num-groups" name="num_groups" min="1" value="{{ loaded_settings.get('num_groups', 2) if loaded_settings else 2 }}">
            </div>

            <div id="group-size-input" style="display:none;">
                <label for="group-size">GruppengrÃ¶ÃŸe:</label>
                <input type="number" id="group-size" name="group_size" min="1" value="{{ loaded_settings.get('group_size', 3) if loaded_settings else 3 }}">
            </div>
        </div>

        {% if selected_player_list_id %}
            <input type="hidden" name="selected_player_list_id" value="{{ selected_player_list_id }}">
        {% endif %}

        <button type="submit" class="submit-btn">Gruppen generieren</button>
    </form>

    {% if g.user %}
        <hr>
        <h3>Namensliste speichern</h3>
        <p>Speichere die aktuelle Liste der Namen, um sie spÃ¤ter wiederzuverwenden.</p>
        <form action="{{ url_for('save_player_list') }}" method="post" id="save-player-list-form">
            <input type="text" name="list_name" placeholder="Name der Namensliste (z.B. 'Klasse A')" required>
            <div id="names-for-saving-container" style="display: none;"></div>
            {% if selected_player_list_id %}
                <input type="hidden" name="selected_player_list_id_for_update" value="{{ selected_player_list_id }}">
            {% endif %}
            <button type="submit" class="button submit-btn save-btn">Namensliste speichern</button>
        </form>
    {% else %}
        <p>MÃ¶chtest du deine Namenslisten speichern? <a href="{{ url_for('login') }}">Melde dich an</a> oder <a href="{{ url_for('register') }}">registriere dich</a>!</p>
    {% endif %}

        <div class="form-section">
        <h3>Geplante Erweiterungen</h3>
        <p>Diese App wird kontinuierlich erweitert. In zukÃ¼nftigen Updates werden folgende Funktionen hinzugefÃ¼gt:</p>
        <ul>
            <li>ğŸ”œ <strong>Modus-Auswahl:</strong> Projekt-Teams, Sport-Teams oder Standard-Modus</li>
            <li>ğŸ”œ <strong>Sportarten-spezifische Einstellungen</strong> fÃ¼r prÃ¤zise Gruppeneinteilungen</li>
            <li>ğŸ”œ <strong>Individuelle Bewertungen:</strong> Flexible Rating-Systeme fÃ¼r Teilnehmer</li>
            <li>ğŸ”œ <strong>Rollen & Positionen:</strong> Definition und Verteilung von spezifischen Rollen</li>
            <li>ğŸ”œ <strong>Team-PrÃ¤ferenzen:</strong> Festlegen wer zusammen oder getrennt sein soll</li>
            <li>ğŸ”œ <strong>Drag & Drop Bearbeitung:</strong> Manuelles Anpassen der Gruppenergebnisse</li>
            <li>ğŸ”œ <strong>Ergebnis teilen:</strong> Einfaches Teilen via Link oder QR-Code</li>
        </ul>
        <p>Details zu den geplanten Funktionen findest du in der <a href="https://github.com/reneidou/complete-group-randomizer/tree/create-functional-basis-version" target="_blank">Projekt-README</a>.</p>
    </div>

{% endblock %}