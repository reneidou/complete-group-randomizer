{% extends "base.html" %}

{% block title %}Startseite - Gruppen-Zufallsgenerator{% endblock %}

{% block content %}
    <h2>Willkommen beim Gruppen-Zufallsgenerator!</h2>
    
    <!-- Modus-Auswahl -->
    <div class="form-section">
        <h3>1. Modus wählen</h3>
        <div class="mode-selection">
            <label>
                <input type="radio" name="mode" value="standard" checked>
                <span>Standard</span>
            </label>
            <label>
                <input type="radio" name="mode" value="project">
                <span>Projekt-Teams</span>
            </label>
            <label>
                <input type="radio" name="mode" value="sport">
                <span>Sport-Teams</span>
            </label>
        </div>
        
        <div id="sport-selection" style="display: none;">
            <label for="sport">Sportart:</label>
            <select id="sport" name="sport">
                <option value="fussball">Fussball</option>
                <option value="basketball">Basketball</option>
                <option value="volleyball">Volleyball</option>
                <option value="handball">Handball</option>
                <option value="hockey">Hockey</option>
                <option value="other">Andere</option>
            </select>
        </div>
    </div>
    
    <!-- Namen eingeben -->
    <div class="form-section">
        <h3>2. Namen der Teilnehmer eingeben</h3>
        <div id="names-container">
            <!-- Dynamisch generierte Namensfelder -->
        </div>
        <button type="button" id="add-name-btn" class="button">Weiteren Namen hinzufügen</button>
    </div>
    
    <!-- Erweiterte Optionen (modular) -->
    <div class="form-section">
        <h3>
            <button type="button" id="toggle-advanced" class="button button-small">
                Erweiterte Optionen anzeigen
            </button>
        </h3>
        
        <div id="advanced-options" style="display: none;">
            <!-- Ratings -->
            <div class="advanced-section">
                <h4>Bewertungen</h4>
                <p>Bewertungsspanne: 
                    <input type="number" id="min-rating" value="1" min="-100" max="100" style="width: 60px;">
                    bis 
                    <input type="number" id="max-rating" value="5" min="-100" max="100" style="width: 60px;">
                    <select id="rating-direction" style="margin-left: 10px;">
                        <option value="1">Höher = besser</option>
                        <option value="-1">Niedriger = besser</option>
                    </select>
                </p>
                <div id="rating-container"></div>
            </div>
            
            <!-- Rollen/Tags -->
            <div class="advanced-section">
                <h4>Rollen/Tags</h4>
                <div id="roles-container">
                    <div class="role-entry">
                        <input type="text" placeholder="Rollenname (z.B. Verteidiger)" class="role-name">
                        <input type="number" placeholder="Min" min="0" class="role-min" style="width: 60px;">
                        <input type="number" placeholder="Max" min="0" class="role-max" style="width: 60px;">
                        <button type="button" class="button-x-small remove-role">&times;</button>
                    </div>
                </div>
                <button type="button" id="add-role-btn" class="button button-small">Weitere Rolle hinzufügen</button>
                
                <div id="role-assignment-container" style="margin-top: 15px;"></div>
            </div>
            
            <!-- Präferenzen -->
            <div class="advanced-section">
                <h4>Präferenzen</h4>
                <div id="preferences-container">
                    <div class="preference-entry">
                        <select class="preference-player">
                            <option value="">Spieler wählen</option>
                        </select>
                        <select class="preference-type">
                            <option value="must">muss mit</option>
                            <option value="avoid">darf nicht mit</option>
                        </select>
                        <select class="preference-target">
                            <option value="">Zielspieler wählen</option>
                        </select>
                        <button type="button" class="button-x-small remove-preference">&times;</button>
                    </div>
                </div>
                <button type="button" id="add-preference-btn" class="button button-small">Weitere Präferenz hinzufügen</button>
            </div>
        </div>
    </div>
    
    <!-- Gruppeneinstellungen -->
    <div class="form-section">
        <h3>3. Gruppeneinteilung festlegen</h3>
        <label for="group-type">Wie möchtest du die Gruppen einteilen?</label>
        <select id="group-type" name="group_type">
            <option value="num_groups">Anzahl Gruppen</option>
            <option value="group_size">Gruppengröße</option>
        </select>

        <div id="num-groups-input" style="display:none;">
            <label for="num-groups">Anzahl der Gruppen:</label>
            <input type="number" id="num-groups" name="num_groups" min="1" value="2">
        </div>

        <div id="group-size-input" style="display:none;">
            <label for="group-size">Gruppengröße:</label>
            <input type="number" id="group-size" name="group_size" min="1" value="3">
        </div>
    </div>
    
    <!-- Geplante Funktionen -->
    <div class="form-section">
        <h3>Neu: Erweiterte Funktionen</h3>
        <p>Diese App wurde um folgende Funktionen erweitert:</p>
        <ul>
            <li>✅ <strong>Modus-Auswahl:</strong> Projekt-Teams, Sport-Teams oder Standard-Modus</li>
            <li>✅ <strong>Sportarten-spezifische Einstellungen</strong> für präzise Gruppeneinteilungen</li>
            <li>✅ <strong>Individuelle Bewertungen:</strong> Flexible Rating-Systeme für Teilnehmer</li>
            <li>✅ <strong>Rollen & Positionen:</strong> Definition und Verteilung von spezifischen Rollen</li>
            <li>✅ <strong>Team-Präferenzen:</strong> Festlegen wer zusammen oder getrennt sein soll</li>
            <li>✅ <strong>Drag & Drop Bearbeitung:</strong> Manuelles Anpassen der Gruppenergebnisse</li>
            <li>✅ <strong>Rating-Anpassung:</strong> Dynamische Anpassung nach Spielergebnissen</li>
            <li>✅ <strong>Ergebnis teilen:</strong> Einfaches Teilen via Link oder QR-Code</li>
        </ul>
    </div>
    
    <!-- Formular-Abschluss -->
    {% if selected_player_list_id %}
        <input type="hidden" name="selected_player_list_id" value="{{ selected_player_list_id }}">
    {% endif %}

    <button type="submit" class="submit-btn">Gruppen generieren</button>
{% endblock %}